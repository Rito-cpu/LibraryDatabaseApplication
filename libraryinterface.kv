#:kivy 2.0.0
#: import hex kivy.utils.get_color_from_hex
<LoginMenu>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: hex("#49677B")                
            Rectangle:
                pos: self.pos
                size: self.size
    Label:
        font_size: 30
        text: "Account Sign-In"
        pos_hint: {"x": 0,"y": 0.43}
    Label:
        font_size: 20
        text: "Username"
        pos_hint: {"x": -0.2,"y": 0.185}
    Label:
        font_size: 20
        text: "Password"
        pos_hint: {"x": -0.2,"y": 0.085}
    TextInput:
        id: textinput_username
        multiline: "False"
        pos_hint: {"x": 0.39,"y": 0.65}
        size_hint: 0.2, 0.07
    TextInput:
        id: textinput_password
        multiline: "False"
        pos_hint: {"x": 0.39,"y": 0.55}
        size_hint: 0.2, 0.07
    Button:
        text: "Login"
        size_hint: 0.09, 0.09
        pos_hint: {"x": 0.45,"y": 0.4}
        on_press: root.onLogin()
    Button:
        text: "Signup"
        size_hint: 0.09, 0.09
        pos_hint: {"x": 0.45,"y": 0.3}
        on_press: 
            root.manager.transition.direction = "up"
            root.manager.current = "signupmenu"
    Button:
        id: exit_button1
        text: "Exit"
        size_hint: 0.09, 0.09
        on_press: app.stop()
<SignupMenu>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: hex("#49677B")                
            Rectangle:
                pos: self.pos
                size: self.size
    Label:
        font_size: 30
        text: "Account Signup"
        pos_hint: {"x": 0,"y": 0.43}
    Label:
        font_size: 20
        text: "Username"
        pos_hint: {"x": -0.2,"y": 0.185}
    Label:
        font_size: 20
        text: "Password"
        pos_hint: {"x": -0.2,"y": 0.085}
    TextInput:
        id: signup_username
        multiline: "False"
        pos_hint: {"x": 0.39,"y": 0.65}
        size_hint: 0.2, 0.07
    TextInput:
        id: signup_password
        multiline: "False"
        pos_hint: {"x": 0.39,"y": 0.55}
        size_hint: 0.2, 0.07
    Button:
        text: "Submit"
        size_hint: 0.09, 0.09
        pos_hint: {"x": 0.45,"y": 0.4}
        on_press: root.submit()
    Button:
        text: "Return"
        size_hint: 0.08, 0.08
        on_press: 
            root.manager.transition.direction = "down"
            root.manager.current = "loginmenu"
<MainMenu>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: hex("#49677B")                
            Rectangle:
                pos: self.pos
                size: self.size
    Label:
        font_size: 30
        text: "Welcome, User!"
        pos_hint: {"x": 0,"y": 0.43}
    Button:
        id: exit_button2
        text: "Exit"
        size_hint: 0.09, 0.09
        on_press: app.stop()
    Button:
        id: logout_button
        text: "Logout"
        size_hint: 0.09, 0.09
        pos_hint: {"x": 0.12,"y": 0}
        on_press: 
            root.manager.transition.direction = "right"
            root.manager.current = "loginmenu"
            root.logout()
    Button:
        text: "Library"
        size_hint: 0.1, 0.1
        pos_hint: {"x": 0.45,"y": 0.65}
        on_press: 
            root.manager.transition.direction = "left"
            root.manager.current = "librarymenu"
    Button:
        text: "Checkout"
        size_hint: 0.1, 0.1
        pos_hint: {"x": 0.45,"y": 0.5}
        on_press: 
            root.manager.transition.direction = "left"
            root.manager.current = "checkoutmenu"
    Button:
        text: "My Books"
        size_hint: 0.12, 0.1
        pos_hint: {"x": 0.44,"y": 0.35}
        on_press: 
            root.manager.transition.direction = "left"
            root.manager.current = "mybooksmenu"
            root.getmybooksthread()

<LibraryMenu>:
    BoxLayout:
        orientation: "vertical"
        canvas.before:
            Color:
                rgba: hex("#49677B")
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, .3
            padding: [0, 20, 0, 0]
            spacing: 20
            Label:
                font_size: 30
                size_hint: 1, .1
                text: "Search Library"
                pos_hint: {'center_x': .5, 'y': 0}
            TextInput:
                id: userSearch
                multiline: "False"
                text: ""
                size_hint: 0.5, 0.1
                pos_hint: {'center_x': .5}
            Button:
                text: "Search"
                size_hint: 0.1, 0.1
                pos_hint: {'center_x': .5}
                on_press: root.getbooksthread()

        GridLayout:
            size_hint: (1, .15)
            cols: 7
            spacing: [5]
            Hlabel:
                text: "Title"
            Hlabel:
                text: "Author First Name"
            Hlabel:
                text: "Author Last Name"
            Hlabel:
                text: "ISBN"
            Hlabel:
                text: "Genre"
            Hlabel:
                text: "Stock"
            Hlabel:
                text: ""
        BoxLayout:
            size_hint: 1, .6
            GridLayout:
                cols: 2
                size_hint_x: 1
                BoxLayout:
                    id: box
                    size_hint: .84, 1
                    RecycleView
                        id: bookstable
                        viewclass: 'Book'
                        data: [{'text': str(x)} for x in root.books]
                        size_hint: 1, 1
                        RecycleGridLayout:
                            cols: 6
                            spacing: [10]
                            valign: 'middle'
                            default_size: None, dp(26)
                            default_size_hint: 1, None
                            height: self.minimum_height
                            orientation: 'lr-tb'
                GridLayout:
                    orientation: 'tb-lr'
                    id: addtocartbox
                    cols: 1
                    spacing: 10
                    size_hint: .14, 1
    GridLayout:
        cols: 2
        size_hint: 1, .1
        BoxLayout:
            size_hint: 0.01, 1
            Button:
                id: return_button1
                text: "Return"
                on_press:
                    root.clearSearch()
                    root.manager.transition.direction = "right"
                    root.manager.current = "mainmenu"
<AddToCartButton>:
    # Draw a background to indicate selection
    text: "Reserve"
    size: 100, 60
    size_hint: None, None

<RemoveFromCartButton>:
    # Draw a background to indicate selection
    text: "Remove"
    size: 100, 60
    size_hint: None, None

<Book>:
    text_size: root.width, 60
    size: self.texture_size
    halign: 'center'
    valign: 'middle'
    # Draw a background to indicate selection

<Hlabel>:
    text_size: root.width, None
    height: self.texture_size[1]
    size_hint_y: None
    halign: 'center'
    valign: 'middle'

<CheckoutMenu>:
    id: checkoutmenu
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: hex("#49677B")                
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            pos_hint: {'center_x': .5, 'y': 0}
            size_hint: 1, .2
            font_size: 30
            text: "Checkout Books"
            pos_hint: {"x": 0,"y": 0.35}

        GridLayout:
            size_hint: (1, .15)
            cols: 6
            spacing: [5]
            Hlabel:
                text: "Title"
            Hlabel:
                text: "Author First Name"
            Hlabel:
                text: "Author Last Name"
            Hlabel:
                text: "ISBN"
            Hlabel:
                text: "Genre"
            Hlabel:
                text: ""
        BoxLayout:
            size_hint: 1, .6
            GridLayout:
                cols: 2
                size_hint_x: 1
                BoxLayout:
                    id: box
                    size_hint: .84, 1
                    RecycleView
                        id: checkout
                        viewclass: 'Book'
                        data: [{'text': x} for x in root.books]
                        size_hint: 1, 1
                        RecycleGridLayout:
                            cols: 5
                            spacing: [10]
                            valign: 'middle'
                            default_size: None, dp(26)
                            default_size_hint: 1, None
                            height: self.minimum_height
                            orientation: 'lr-tb'
                    GridLayout:
                        orientation: 'tb-lr'
                        id: removegrid
                        cols: 1
                        spacing: 10
                        size_hint: .14, 1
        FloatLayout:
            orientation: 'horizontal'
            Button:
                id: return_button2
                text: "Return"
                size_hint: 0.1, 0.2
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.current = "mainmenu"
            Button:
                id: checkout_button
                text: "Checkout"
                size_hint: 0.1, 0.2
                pos_hint: {'center_x': .5}
                on_press:
                    root.checkout()
<MyBooksMenu>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: hex("#49677B")
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            pos_hint: {'center_x': .5, 'y': 0}
            size_hint: 1, .2
            font_size: 30
            text: "My Books"
            pos_hint: {"x": 0,"y": 0.35}

        GridLayout:
            size_hint: (1, .15)
            cols: 5
            spacing: [5]
            Hlabel:
                text: "Title"
            Hlabel:
                text: "Author First Name"
            Hlabel:
                text: "Author Last Name"
            Hlabel:
                text: "ISBN"
            Hlabel:
                text: "Checkout Date"
        BoxLayout:
            size_hint: 1, .6
            GridLayout:
                cols: 2
                size_hint_x: 1
                BoxLayout:
                    id: box
                    size_hint: .84, 1
                    RecycleView
                        id: mybookstable
                        viewclass: 'Book'
                        data: [{'text': x} for x in root.books]
                        size_hint: 1, 1
                        RecycleGridLayout:
                            cols: 5
                            spacing: [10]
                            valign: 'middle'
                            default_size: None, dp(26)
                            default_size_hint: 1, None
                            height: self.minimum_height
                            orientation: 'lr-tb'
        Button:
            id: return_button3
            text: "Return"
            size_hint: 0.08, 0.08
            on_press:
                root.manager.transition.direction = "right"
                root.manager.current = "mainmenu"